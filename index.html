<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vuelve a Ti · Oráculo</title>
  <meta name="description" content="Tu oráculo de luz: una guía suave de tu alma" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
 
  <style>
    /* === ESTRUCTURA DE PÁGINA UNIFICADA === */
    .page {
      max-width: 800px;
      margin: 20px auto 40px auto;
      padding: 0 20px;
    }
    .card-principal {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.08);
      text-align: center;
    }
    .header {
      margin-bottom: 10px;
    }
    .header h1 {
      color: #6a1b9a;
      font-family: Inter, sans-serif;
      font-weight: 600;
      font-size: clamp(22px,4vw,36px);
      margin: 0;
    }

    /* ===== BOTÓN DE INICIO (alineado con el recuadro blanco) ===== */
    .topbar {
      display: flex;
      justify-content: flex-start;
      align-items: center;
      max-width: 800px;
      margin: 20px auto 0 auto;
      padding: 0 20px;
    }
    .home {
      display: inline-flex;
      gap: 8px;
      align-items: center;
      text-decoration: none;
      color: #3E2833;
      font-weight: 800;
      border: 1px solid #eadfd6;
      padding: 8px 12px;
      border-radius: 14px;
      background: white;
      box-shadow: 0 10px 38px rgba(62,40,51,.08);
    }
    .home svg {
      width: 18px;
      height: 18px;
      stroke: currentColor;
      fill: none;
      stroke-width: 2;
    }

    :root{
      --tinta:#3E2833;
      --bg:#EFE7DE;
      --shadow:0 10px 38px rgba(62,40,51,.08);
      --radius:28px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--tinta);}
    body{
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
      font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
    }
    .app{width:min(940px,100%);}
    header{text-align:center;margin:16px 0 34px}
    header h1{font-family:Marcellus,serif;font-weight:400;font-size:clamp(22px,4vw,36px);margin:0}
    header p{margin:8px 0 0;opacity:.85}

    .screen{display:none}
    .screen.active{display:block;animation:fade .35s ease-out}

    /* INICIO */
    .welcome{display:grid;gap:22px;justify-items:center;margin-top:18px}
    .choices{display:grid;gap:14px;max-width:640px;width:100%;margin-top:6px}
    .btn{
      border:1px solid #e7d8cc;
      background:white;
      color:var(--tinta);
      padding:16px 20px;
      border-radius:20px;
      font-weight:800;
      cursor:pointer;
      box-shadow: var(--shadow);
      font-size:clamp(15px,2.5vw,18px);
    }
    .btn.big{padding:18px 22px;border-radius:24px}
    .btn.ghost{background:transparent;border-color:#e0d2c7;box-shadow:none}

    /* CARTA con degradado lavanda + dorado */
    .card {
      background: linear-gradient(180deg, #FFFFFF 0%, #FDF9FF 100%);
      border: 2px solid #D4AF37;
      border-radius: var(--radius);
      padding: 28px;
      box-shadow: 0 14px 34px rgba(212,175,55,0.22);
      display: grid;
      gap: 14px;
      min-height: 320px;
      animation: rise .35s ease-out;
      margin-top: 22px;
      margin-bottom: 26px;
    }
    .title{font-family:Marcellus,serif;font-size:clamp(24px,3.6vw,34px);margin:2px 0 4px;text-align:center}
    .phrase{font-size:clamp(16px,2.4vw,20px);font-weight:800;text-align:center}
    .msg{font-size:clamp(15px,2.2vw,18px);line-height:1.65;text-align:center}
    .meta{margin-top:10px;text-align:center;opacity:.7;font-size:13px}
    .actions{display:flex;justify-content:space-between;gap:12px;margin-top:18px}
    .actions .btn{min-width:44%;}
    footer{margin-top:40px;font-size:12px;opacity:.7;text-align:center}

    /* Ocultar cabecera y bienvenida cuando se está en modo carta */
    body.mode-reading header, body.mode-reading #welcome{display:none !important;}

    @keyframes fade{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
    @keyframes rise{from{opacity:0;transform:translateY(10px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}
  </style>
</head>
<body>
  <div class="app">

    <!-- Botón Inicio -->
    <div class="topbar">
      <a class="home" href="./home.html" aria-label="Volver al inicio">
        <svg viewBox="0 0 24 24"><path d="M3 12l9-8 9 8"></path><path d="M5 10v10h14V10"></path></svg>
        <span>Inicio</span>
      </a>
    </div>
    
    <main class="page">
      <article class="card-principal">
    
        <header>
          <div class="header">
            <h1>Tu Oráculo de Luz</h1>
          </div>
          <p class="oraculo-lema">Un mensaje del alma para tu día</p>
          <p class="intro" style="max-width:640px;margin:35px auto;font-size:15px;line-height:1.6;text-align:center;opacity:.9;">
            <em><strong>Confía en tu intuición.</strong> Cierra los ojos, respira profundo y elige la pregunta que más resuena en tu corazón hoy, luego elige el oráculo que te iluminará.</em>
          </p>
        </header>

        <!-- Pantalla inicial Optimizada -->
        <section id="welcome" class="screen welcome active">
          <p class="subtitle" style="margin-bottom:28px;">El universo tiene una guía para ti:</p>
          <div class="choices">

            <!-- BOTÓN 1 -->
            <button class="btn big" data-deck="auto">
              <span class="titulo">Oráculo de la Suavidad</span>
              <span class="subtitulo">El antídoto para tu autoexigencia. Baja el volumen de tu crítica interna.</span>
            </button>

            <!-- BOTÓN 2 -->
            <button class="btn big" data-deck="busca">
              <span class="titulo">Oráculo de la Claridad</span>
              <span class="subtitulo">Sal del bucle mental. Un mensaje directo para destrabar tu indecisión.</span>
            </button>

            <!-- BOTÓN 3 -->
            <button class="btn big" data-deck="recon">
              <span class="titulo">Oráculo del Soltar</span>
              <span class="subtitulo">Deja de intentar controlarlo todo. Un mensaje para confiar y fluir.</span>
            </button>

          </div>
        </section>

        <style>
          /* Espacio entre el botón inicio y el título */
          header {
             margin-top: 40px;
          }
          
          /* Subtítulo del oráculo */
          .oraculo-subtitulo {
            margin-bottom: 35px;
          }

          .oraculo-lema {
            font-size: 0.85em;
            font-weight: normal;
            color: #555;
            margin-top: 5px;
            font-style: italic;
          }
          
          /* Ajuste botones con dos líneas */
          .choices .btn.big {
            height: auto;
            padding-top: 18px;
            padding-bottom: 18px;
            line-height: 1.4;
          }

          .btn .titulo {
            display: block;
            font-weight: bold;
            font-size: 1em;
          }

          .btn .subtitulo {
            display: block;
            font-size: 0.78em;
            font-weight: normal;
            color: #666;
            margin-top: 5px;
          }
        </style>
    

        <!-- Pantalla de carta -->
        <section id="reading" class="screen">
          <article class="card" id="card">
            <div class="title" id="title">Nombre de la Carta</div>
            <div class="phrase" id="phrase">“Frase de poder…”</div>
            <div class="msg" id="msg">“Mensaje guía…”</div>
          </article>
          <div class="meta" id="meta">Mazo · Carta X</div>
          <div class="actions">
            <button id="backBtn" class="btn ghost">← Elegir otro oráculo</button>
            <button id="againBtn" class="btn">Otra carta</button>
          </div>
        </section>

        <footer>© Vuelve a Ti · Rosita Ávila</footer>
      </article>
    </main>
  </div>

  <!-- ===================== DATA DE LOS MAZOS ===================== -->
  <!-- (todo el JS de los mazos y la lógica lo dejo tal como lo tenías) -->
  <!-- … aquí sigue exactamente tu JS original, sin cambios … -->
  
  <!-- MAZO 1 -->
  <script>
  const deckAuto = [
    /* ... (todo tu mazo 1 igual que antes) ... */
  ];
  </script>

  <!-- MAZO 2 -->
  <script>
  const deckBusca = [
    /* ... (todo tu mazo 2 igual que antes) ... */
  ];
  </script>

  <!-- MAZO 3 -->
  <script>
  const deckRecon = [
    /* ... (todo tu mazo 3 igual que antes) ... */
  ];
  </script>

  <!-- Lógica de la app -->
  <script>
    const decks = {
      auto:  { name: "De la autoexigencia a la suavidad",  list: deckAuto  },
      busca: { name: "De buscadora a encontradora",        list: deckBusca },
      recon: { name: "De desaprender a reconocerte",       list: deckRecon }
    };

    const state = { deckKey: null, lastIndex: null };

    function drawRandom(deckKey){
      const d = decks[deckKey];
      const pool = d?.list;
      if(!pool || pool.length === 0) return;

      let idx = Math.floor(Math.random()*pool.length);
      if (state.lastIndex === idx && pool.length > 1){
        idx = (idx + 1 + Math.floor(Math.random()*(pool.length-1))) % pool.length;
      }
      state.lastIndex = idx;
      renderCard(d.name, idx+1, pool[idx]);

      const url = new URL(location);
      url.searchParams.set("deck", deckKey);
      history.replaceState(null,"",url);
    }

    function renderCard(deckName, number, arr){
      const [title, phrase, msg] = arr;
      document.getElementById("title").textContent   = title;
      document.getElementById("phrase").textContent  = `“${phrase}”`;
      document.getElementById("msg").textContent     = `“${msg}”`;
      document.getElementById("meta").textContent    = `${deckName} · Carta ${number}`;
      const el = document.getElementById("card");
      el.style.animation = "none";
      requestAnimationFrame(()=>{ el.style.animation = ""; });
    }

    const welcome = document.getElementById("welcome");
    const reading = document.getElementById("reading");

    document.querySelectorAll("[data-deck]").forEach(b=>{
      b.addEventListener("click", ()=>{
        state.deckKey = b.dataset.deck;
        document.body.classList.add("mode-reading");
        welcome.classList.remove("active");
        reading.classList.add("active");
        drawRandom(state.deckKey);
        window.scrollTo({top:0,behavior:"smooth"});
      });
    });

    document.getElementById("againBtn").addEventListener("click", ()=>{
      if(state.deckKey){ drawRandom(state.deckKey); }
      window.scrollTo({top:0,behavior:"smooth"});
    });

    document.getElementById("backBtn").addEventListener("click", ()=>{
      reading.classList.remove("active");
      welcome.classList.add("active");
      document.body.classList.remove("mode-reading");
      const url = new URL(location);
      url.searchParams.delete("deck");
      history.replaceState(null,"",url);
      window.scrollTo({top:0,behavior:"smooth"});
    });

    (function init(){
      const dk = new URL(location).searchParams.get("deck");
      if (dk && decks[dk]){
        state.deckKey = dk;
        document.body.classList.add("mode-reading");
        welcome.classList.remove("active");
        reading.classList.add("active");
        drawRandom(state.deckKey);
      }
    })();
  </script>
</body>
</html>
