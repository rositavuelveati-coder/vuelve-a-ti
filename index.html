<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vuelve a Ti ¬∑ Or√°culo</title>
  <meta name="description" content="Or√°culo Vuelve a Ti: una gu√≠a suave para tu d√≠a." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Marcellus&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --lavanda:#CBAACB;
      --beige:#EFE3D6;
      --rosa:#E6B7C2;
      --dorado:#D4AF37;
      --tinta:#3E2833;
      --bg:#EFE7DE;
      --card:#FFFFFF;
      --shadow:0 10px 38px rgba(62,40,51,.08);
      --radius:28px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--tinta);}
    body{display:flex;align-items:center;justify-content:center;padding:24px;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;}
    .app{width:min(940px,100%);}
    header{text-align:center;margin:16px 0 34px}
    header h1{font-family:Marcellus,serif;font-weight:400;font-size:clamp(22px,4vw,36px);margin:0}
    header p{margin:8px 0 0;opacity:.85}
    .screen{display:none}
    .screen.active{display:block;animation:fade .35s ease-out}
    /* INICIO */
    .welcome{display:grid;gap:22px;justify-items:center;margin-top:18px}
    .lead{font-weight:800}
    .choices{display:grid;gap:14px;max-width:640px;width:100%;margin-top:6px}
    .btn{
      border:1px solid #e7d8cc;background:white;color:var(--tinta);
      padding:16px 20px;border-radius:20px;font-weight:800;cursor:pointer;
      box-shadow: var(--shadow); font-size:clamp(15px,2.5vw,18px);
    }
    .btn.big{padding:18px 22px;border-radius:24px}
    .btn.ghost{background:transparent;border-color:#e0d2c7;box-shadow:none}
    /* CARTA */
    .card{
      background:linear-gradient(180deg,#FFFFFF 0%, #FFF9F7 100%);
      border:1px solid #eadfd6;
      border-radius:var(--radius);
      padding:28px;
      box-shadow: var(--shadow);
      display:grid;gap:14px;min-height:320px;
      animation:rise .35s ease-out;
    }
    .title{font-family:Marcellus,serif;font-size:clamp(24px,3.6vw,34px);margin:2px 0 4px;text-align:center}
    .phrase{font-size:clamp(16px,2.4vw,20px);font-weight:800;text-align:center}
    .msg{font-size:clamp(15px,2.2vw,18px);line-height:1.65;text-align:left}
    .meta{margin-top:10px;text-align:center;opacity:.7;font-size:13px}
    .actions{display:flex;justify-content:space-between;gap:12px;margin-top:18px}
    .actions .btn{min-width:44%;}
    footer{margin-top:18px;font-size:12px;opacity:.7;text-align:center}
    @keyframes fade{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
    @keyframes rise{from{opacity:0;transform:translateY(10px) scale(.98)}to{opacity:1;transform:translateY(0) scale(1)}}
  </style>
</head>
<body>
  <div class="app">
    <header>
      <h1>‚ú® Vuelve a Ti ¬∑ Or√°culo ‚ú®</h1>
      <p>Una gu√≠a suave para tu d√≠a</p>
    </header>

    <!-- Pantalla inicial -->
    <section id="welcome" class="screen welcome active">
      <div class="lead"><strong>Elige el or√°culo que te iluminar√° hoy</strong></div>
      <div class="choices">
        <button class="btn big" data-deck="auto">üå∏ De la Autoexigencia a la Suavidad</button>
        <button class="btn big" data-deck="busca">üåô De Buscadora a Encontradora</button>
      </div>
    </section>

    <!-- Pantalla de carta -->
    <section id="reading" class="screen">
      <article class="card" id="card">
        <div class="title" id="title">Nombre de la Carta</div>
        <div class="phrase" id="phrase">‚ÄúFrase de poder‚Ä¶‚Äù</div>
        <div class="msg" id="msg">‚ÄúMensaje gu√≠a‚Ä¶‚Äù</div>
      </article>
      <div class="meta" id="meta">Mazo ¬∑ Carta X</div>
      <div class="actions">
        <button id="backBtn" class="btn ghost">‚Üê Elegir otro or√°culo</button>
        <button id="againBtn" class="btn">Otra carta ‚ú®</button>
      </div>
    </section>

    <footer>¬© Vuelve a Ti ¬∑ Rosita √Åvila</footer>
  </div>

<script>
// Simplificado: se mantienen los mazos como en la versi√≥n previa
const decks = {
  auto: {
    name: "De la autoexigencia a la suavidad",
    categories: { "demo":[ ["Carga Pesada","Reconozco que he llevado m√°s de lo que me corresponde.","No eres d√©bil por admitir tu cansancio. Ver la carga es el primer paso para soltarla. Hoy, date el permiso de sentir lo que pesa."] ] }
  },
  busca: {
    name: "De buscadora a encontradora",
    categories: { "demo":[ ["Camino Inquieto","Reconozco mi anhelo de encontrar afuera lo que ya soy.","La b√∫squeda comenz√≥ con movimiento externo. Corr√≠as tras respuestas en otros lugares, sin saber que tu hogar estaba dentro. Hoy, observa ese impulso con ternura."] ] }
  }
};

const state = { deckKey: null };

function drawRandom(deckKey){
  const d = decks[deckKey];
  const cats = Object.entries(d.categories);
  let pool = [];
  for (const [cat, list] of cats){
    pool = pool.concat(list.map((c,i)=>({idx:i, data:c})));
  }
  const pick = pool[Math.floor(Math.random()*pool.length)];
  renderCard(d.name, pick.idx+1, pick.data);
  const url = new URL(location);
  url.searchParams.set("deck", deckKey);
  history.replaceState(null,"",url);
}

function renderCard(deckName, number, arr){
  const [title, phrase, msg] = arr;
  document.getElementById("title").textContent = title;
  document.getElementById("phrase").textContent = `‚Äú${phrase}‚Äù`;
  document.getElementById("msg").textContent = `‚Äú${msg}‚Äù`;
  document.getElementById("meta").textContent = `${deckName} ¬∑ Carta ${number}`;
  const el = document.getElementById("card");
  el.style.animation = "none";
  requestAnimationFrame(()=>{ el.style.animation = ""; });
}

const welcome = document.getElementById("welcome");
const reading = document.getElementById("reading");
document.querySelectorAll("[data-deck]").forEach(b=>{
  b.addEventListener("click", ()=>{
    state.deckKey = b.dataset.deck;
    welcome.classList.remove("active"); reading.classList.add("active");
    drawRandom(state.deckKey);
    window.scrollTo({top:0,behavior:"smooth"});
  });
});
document.getElementById("againBtn").addEventListener("click", ()=>{
  drawRandom(state.deckKey);
  window.scrollTo({top:0,behavior:"smooth"});
});
document.getElementById("backBtn").addEventListener("click", ()=>{
  reading.classList.remove("active"); welcome.classList.add("active");
  const url = new URL(location); url.searchParams.delete("deck"); history.replaceState(null,"",url);
  window.scrollTo({top:0,behavior:"smooth"});
});

(function init(){
  const url = new URL(location);
  const dk = url.searchParams.get("deck");
  if (dk && decks[dk]){
    state.deckKey = dk;
    welcome.classList.remove("active"); reading.classList.add("active");
    drawRandom(state.deckKey);
  }
})();
</script>
</body>
</html>
